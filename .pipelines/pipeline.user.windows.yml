environment:
  host:
    os: 'windows'
    flavor: 'server'
    version: '2019'
  runtime:
    provider: 'appcontainer'
    image: 'cdpxwin1809.azurecr.io/global/vse2019:latest'
    source_mode: 'map'
restore:
  commands:
    - !!defaultcommand
      name: 'Install Tools'
      command: 'cdpx/scripts/restore.cmd'
    - !!defaultcommand
      name: 'Clean'
      command: './gradlew clean'
build:
  commands:
    - !!buildcommand
      name: 'Assemble ApplicationInsights-Java projects'
      command: './gradlew assemble'
      artifacts:
        - from: 'core/build/libs'
          to: 'build/artifacts'
          include:
            - '*.jar'
test:
  commands:
    - !!testcommand
      name: 'Test ApplicationInsights-Java projects'
      command: './gradlew check'
      testresults:
        - from: 'core/build/test-results/test'
          include:
            - '*.xml'
